!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):(t="undefined"!=typeof globalThis?globalThis:t||self).uploader=e()}(this,(function(){"use strict";function t(t,e,r,n){return new(r||(r=Promise))((function(o,i){function a(t){try{u(n.next(t))}catch(t){i(t)}}function c(t){try{u(n.throw(t))}catch(t){i(t)}}function u(t){var e;t.done?o(t.value):(e=t.value,e instanceof r?e:new r((function(t){t(e)}))).then(a,c)}u((n=n.apply(t,e||[])).next())}))}function e(t){var e=t.default;if("function"==typeof e){var r=function(){return e.apply(this,arguments)};r.prototype=e.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(t).forEach((function(e){var n=Object.getOwnPropertyDescriptor(t,e);Object.defineProperty(r,e,n.get?n:{enumerable:!0,get:function(){return t[e]}})})),r}var r={exports:{}};!function(t,e){t.exports=function(t){var e=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f"];function r(t,e){var r=t[0],n=t[1],o=t[2],i=t[3];n=((n+=((o=((o+=((i=((i+=((r=((r+=(n&o|~n&i)+e[0]-680876936|0)<<7|r>>>25)+n|0)&n|~r&o)+e[1]-389564586|0)<<12|i>>>20)+r|0)&r|~i&n)+e[2]+606105819|0)<<17|o>>>15)+i|0)&i|~o&r)+e[3]-1044525330|0)<<22|n>>>10)+o|0,n=((n+=((o=((o+=((i=((i+=((r=((r+=(n&o|~n&i)+e[4]-176418897|0)<<7|r>>>25)+n|0)&n|~r&o)+e[5]+1200080426|0)<<12|i>>>20)+r|0)&r|~i&n)+e[6]-1473231341|0)<<17|o>>>15)+i|0)&i|~o&r)+e[7]-45705983|0)<<22|n>>>10)+o|0,n=((n+=((o=((o+=((i=((i+=((r=((r+=(n&o|~n&i)+e[8]+1770035416|0)<<7|r>>>25)+n|0)&n|~r&o)+e[9]-1958414417|0)<<12|i>>>20)+r|0)&r|~i&n)+e[10]-42063|0)<<17|o>>>15)+i|0)&i|~o&r)+e[11]-1990404162|0)<<22|n>>>10)+o|0,n=((n+=((o=((o+=((i=((i+=((r=((r+=(n&o|~n&i)+e[12]+1804603682|0)<<7|r>>>25)+n|0)&n|~r&o)+e[13]-40341101|0)<<12|i>>>20)+r|0)&r|~i&n)+e[14]-1502002290|0)<<17|o>>>15)+i|0)&i|~o&r)+e[15]+1236535329|0)<<22|n>>>10)+o|0,n=((n+=((o=((o+=((i=((i+=((r=((r+=(n&i|o&~i)+e[1]-165796510|0)<<5|r>>>27)+n|0)&o|n&~o)+e[6]-1069501632|0)<<9|i>>>23)+r|0)&n|r&~n)+e[11]+643717713|0)<<14|o>>>18)+i|0)&r|i&~r)+e[0]-373897302|0)<<20|n>>>12)+o|0,n=((n+=((o=((o+=((i=((i+=((r=((r+=(n&i|o&~i)+e[5]-701558691|0)<<5|r>>>27)+n|0)&o|n&~o)+e[10]+38016083|0)<<9|i>>>23)+r|0)&n|r&~n)+e[15]-660478335|0)<<14|o>>>18)+i|0)&r|i&~r)+e[4]-405537848|0)<<20|n>>>12)+o|0,n=((n+=((o=((o+=((i=((i+=((r=((r+=(n&i|o&~i)+e[9]+568446438|0)<<5|r>>>27)+n|0)&o|n&~o)+e[14]-1019803690|0)<<9|i>>>23)+r|0)&n|r&~n)+e[3]-187363961|0)<<14|o>>>18)+i|0)&r|i&~r)+e[8]+1163531501|0)<<20|n>>>12)+o|0,n=((n+=((o=((o+=((i=((i+=((r=((r+=(n&i|o&~i)+e[13]-1444681467|0)<<5|r>>>27)+n|0)&o|n&~o)+e[2]-51403784|0)<<9|i>>>23)+r|0)&n|r&~n)+e[7]+1735328473|0)<<14|o>>>18)+i|0)&r|i&~r)+e[12]-1926607734|0)<<20|n>>>12)+o|0,n=((n+=((o=((o+=((i=((i+=((r=((r+=(n^o^i)+e[5]-378558|0)<<4|r>>>28)+n|0)^n^o)+e[8]-2022574463|0)<<11|i>>>21)+r|0)^r^n)+e[11]+1839030562|0)<<16|o>>>16)+i|0)^i^r)+e[14]-35309556|0)<<23|n>>>9)+o|0,n=((n+=((o=((o+=((i=((i+=((r=((r+=(n^o^i)+e[1]-1530992060|0)<<4|r>>>28)+n|0)^n^o)+e[4]+1272893353|0)<<11|i>>>21)+r|0)^r^n)+e[7]-155497632|0)<<16|o>>>16)+i|0)^i^r)+e[10]-1094730640|0)<<23|n>>>9)+o|0,n=((n+=((o=((o+=((i=((i+=((r=((r+=(n^o^i)+e[13]+681279174|0)<<4|r>>>28)+n|0)^n^o)+e[0]-358537222|0)<<11|i>>>21)+r|0)^r^n)+e[3]-722521979|0)<<16|o>>>16)+i|0)^i^r)+e[6]+76029189|0)<<23|n>>>9)+o|0,n=((n+=((o=((o+=((i=((i+=((r=((r+=(n^o^i)+e[9]-640364487|0)<<4|r>>>28)+n|0)^n^o)+e[12]-421815835|0)<<11|i>>>21)+r|0)^r^n)+e[15]+530742520|0)<<16|o>>>16)+i|0)^i^r)+e[2]-995338651|0)<<23|n>>>9)+o|0,n=((n+=((i=((i+=(n^((r=((r+=(o^(n|~i))+e[0]-198630844|0)<<6|r>>>26)+n|0)|~o))+e[7]+1126891415|0)<<10|i>>>22)+r|0)^((o=((o+=(r^(i|~n))+e[14]-1416354905|0)<<15|o>>>17)+i|0)|~r))+e[5]-57434055|0)<<21|n>>>11)+o|0,n=((n+=((i=((i+=(n^((r=((r+=(o^(n|~i))+e[12]+1700485571|0)<<6|r>>>26)+n|0)|~o))+e[3]-1894986606|0)<<10|i>>>22)+r|0)^((o=((o+=(r^(i|~n))+e[10]-1051523|0)<<15|o>>>17)+i|0)|~r))+e[1]-2054922799|0)<<21|n>>>11)+o|0,n=((n+=((i=((i+=(n^((r=((r+=(o^(n|~i))+e[8]+1873313359|0)<<6|r>>>26)+n|0)|~o))+e[15]-30611744|0)<<10|i>>>22)+r|0)^((o=((o+=(r^(i|~n))+e[6]-1560198380|0)<<15|o>>>17)+i|0)|~r))+e[13]+1309151649|0)<<21|n>>>11)+o|0,n=((n+=((i=((i+=(n^((r=((r+=(o^(n|~i))+e[4]-145523070|0)<<6|r>>>26)+n|0)|~o))+e[11]-1120210379|0)<<10|i>>>22)+r|0)^((o=((o+=(r^(i|~n))+e[2]+718787259|0)<<15|o>>>17)+i|0)|~r))+e[9]-343485551|0)<<21|n>>>11)+o|0,t[0]=r+t[0]|0,t[1]=n+t[1]|0,t[2]=o+t[2]|0,t[3]=i+t[3]|0}function n(t){var e,r=[];for(e=0;e<64;e+=4)r[e>>2]=t.charCodeAt(e)+(t.charCodeAt(e+1)<<8)+(t.charCodeAt(e+2)<<16)+(t.charCodeAt(e+3)<<24);return r}function o(t){var e,r=[];for(e=0;e<64;e+=4)r[e>>2]=t[e]+(t[e+1]<<8)+(t[e+2]<<16)+(t[e+3]<<24);return r}function i(t){var e,o,i,a,c,u,s=t.length,l=[1732584193,-271733879,-1732584194,271733878];for(e=64;e<=s;e+=64)r(l,n(t.substring(e-64,e)));for(o=(t=t.substring(e-64)).length,i=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],e=0;e<o;e+=1)i[e>>2]|=t.charCodeAt(e)<<(e%4<<3);if(i[e>>2]|=128<<(e%4<<3),e>55)for(r(l,i),e=0;e<16;e+=1)i[e]=0;return a=(a=8*s).toString(16).match(/(.*?)(.{0,8})$/),c=parseInt(a[2],16),u=parseInt(a[1],16)||0,i[14]=c,i[15]=u,r(l,i),l}function a(t){var e,n,i,a,c,u,s=t.length,l=[1732584193,-271733879,-1732584194,271733878];for(e=64;e<=s;e+=64)r(l,o(t.subarray(e-64,e)));for(n=(t=e-64<s?t.subarray(e-64):new Uint8Array(0)).length,i=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],e=0;e<n;e+=1)i[e>>2]|=t[e]<<(e%4<<3);if(i[e>>2]|=128<<(e%4<<3),e>55)for(r(l,i),e=0;e<16;e+=1)i[e]=0;return a=(a=8*s).toString(16).match(/(.*?)(.{0,8})$/),c=parseInt(a[2],16),u=parseInt(a[1],16)||0,i[14]=c,i[15]=u,r(l,i),l}function c(t){var r,n="";for(r=0;r<4;r+=1)n+=e[t>>8*r+4&15]+e[t>>8*r&15];return n}function u(t){var e;for(e=0;e<t.length;e+=1)t[e]=c(t[e]);return t.join("")}function s(t){return/[\u0080-\uFFFF]/.test(t)&&(t=unescape(encodeURIComponent(t))),t}function l(t,e){var r,n=t.length,o=new ArrayBuffer(n),i=new Uint8Array(o);for(r=0;r<n;r+=1)i[r]=t.charCodeAt(r);return e?i:o}function f(t){return String.fromCharCode.apply(null,new Uint8Array(t))}function p(t,e,r){var n=new Uint8Array(t.byteLength+e.byteLength);return n.set(new Uint8Array(t)),n.set(new Uint8Array(e),t.byteLength),r?n:n.buffer}function y(t){var e,r=[],n=t.length;for(e=0;e<n-1;e+=2)r.push(parseInt(t.substr(e,2),16));return String.fromCharCode.apply(String,r)}function h(){this.reset()}return u(i("hello")),"undefined"==typeof ArrayBuffer||ArrayBuffer.prototype.slice||function(){function e(t,e){return(t=0|t||0)<0?Math.max(t+e,0):Math.min(t,e)}ArrayBuffer.prototype.slice=function(r,n){var o,i,a,c,u=this.byteLength,s=e(r,u),l=u;return n!==t&&(l=e(n,u)),s>l?new ArrayBuffer(0):(o=l-s,i=new ArrayBuffer(o),a=new Uint8Array(i),c=new Uint8Array(this,s,o),a.set(c),i)}}(),h.prototype.append=function(t){return this.appendBinary(s(t)),this},h.prototype.appendBinary=function(t){this._buff+=t,this._length+=t.length;var e,o=this._buff.length;for(e=64;e<=o;e+=64)r(this._hash,n(this._buff.substring(e-64,e)));return this._buff=this._buff.substring(e-64),this},h.prototype.end=function(t){var e,r,n=this._buff,o=n.length,i=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(e=0;e<o;e+=1)i[e>>2]|=n.charCodeAt(e)<<(e%4<<3);return this._finish(i,o),r=u(this._hash),t&&(r=y(r)),this.reset(),r},h.prototype.reset=function(){return this._buff="",this._length=0,this._hash=[1732584193,-271733879,-1732584194,271733878],this},h.prototype.getState=function(){return{buff:this._buff,length:this._length,hash:this._hash.slice()}},h.prototype.setState=function(t){return this._buff=t.buff,this._length=t.length,this._hash=t.hash,this},h.prototype.destroy=function(){delete this._hash,delete this._buff,delete this._length},h.prototype._finish=function(t,e){var n,o,i,a=e;if(t[a>>2]|=128<<(a%4<<3),a>55)for(r(this._hash,t),a=0;a<16;a+=1)t[a]=0;n=(n=8*this._length).toString(16).match(/(.*?)(.{0,8})$/),o=parseInt(n[2],16),i=parseInt(n[1],16)||0,t[14]=o,t[15]=i,r(this._hash,t)},h.hash=function(t,e){return h.hashBinary(s(t),e)},h.hashBinary=function(t,e){var r=u(i(t));return e?y(r):r},h.ArrayBuffer=function(){this.reset()},h.ArrayBuffer.prototype.append=function(t){var e,n=p(this._buff.buffer,t,!0),i=n.length;for(this._length+=t.byteLength,e=64;e<=i;e+=64)r(this._hash,o(n.subarray(e-64,e)));return this._buff=e-64<i?new Uint8Array(n.buffer.slice(e-64)):new Uint8Array(0),this},h.ArrayBuffer.prototype.end=function(t){var e,r,n=this._buff,o=n.length,i=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(e=0;e<o;e+=1)i[e>>2]|=n[e]<<(e%4<<3);return this._finish(i,o),r=u(this._hash),t&&(r=y(r)),this.reset(),r},h.ArrayBuffer.prototype.reset=function(){return this._buff=new Uint8Array(0),this._length=0,this._hash=[1732584193,-271733879,-1732584194,271733878],this},h.ArrayBuffer.prototype.getState=function(){var t=h.prototype.getState.call(this);return t.buff=f(t.buff),t},h.ArrayBuffer.prototype.setState=function(t){return t.buff=l(t.buff,!0),h.prototype.setState.call(this,t)},h.ArrayBuffer.prototype.destroy=h.prototype.destroy,h.ArrayBuffer.prototype._finish=h.prototype._finish,h.ArrayBuffer.hash=function(t,e){var r=u(a(new Uint8Array(t)));return e?y(r):r},h}()}(r);var n,o,i=r.exports;!function(t){t.Progress="progress",t.Retry="retry",t.Success="success",t.Fail="fail",t.Complete="complete"}(n||(n={})),function(t){t[t.InitializeStatus=0]="InitializeStatus",t[t.PendingStatus=1]="PendingStatus",t[t.FulfilledStatus=2]="FulfilledStatus",t[t.RejectStatus=3]="RejectStatus"}(o||(o={}));class a{constructor(t,e,r,n){this.testType=n,this.chunks=[],this.uploadedSize=0,this.digest="",this.init=t=>{this.f.digest((e=>{console.log(e),this.digest=e,this.f.read(0,200,(r=>{const n=this.getNew();n.set("size",this.f.size().toString()),n.set("digest",e),n.set("chunk_size",this.chunksize.toString()),n.set("ts",Date.now().toString()),this.r.initRequest(this.ctx,n,r,t,this.fail)}),(t=>{console.log(t)}))}),(t=>{console.log(t)}))},this.uploadChunk=(t,e,r,n,o)=>{const a=this,c=this.getNew();c.set("upload_id",t),c.set("index",r.toString());const u=new TextDecoder("utf-8").decode(n);c.set("digest",i.hash(u)),this.r.chunkRequest(this.ctx,c,n,(t=>{console.log(t),a.chunks.push({index:r,etag:t.etag}),r<a.totalChunks-1?a.uploadedSize+=a.chunksize:a.uploadedSize+=a.totalSize-a.chunksize*(a.totalChunks-1),a.progress({uploadedSize:a.uploadedSize,totalSize:a.totalSize}),o()}),this.fail)},this.ctx=t,this.f=e,this.r=r,this.totalSize=this.f.size(),this.chunksize=this.ctx.chunkSize||2097152,this.totalChunks=Math.ceil(this.totalSize/this.chunksize),this.maxConcurrency=Math.min(this.totalChunks,this.ctx.maxConcurrency||5),this.tasks=Array.from({length:this.totalChunks},((t,e)=>e))}getNew(){return new this.testType}upload(t){const e=this;for(let t=0;t<this.chunks.length;t++){this.chunks[t].index<this.totalChunks-1?this.uploadedSize+=this.chunksize:this.uploadedSize+=this.totalSize-this.chunksize*(this.totalChunks-1),this.progress({uploadedSize:this.uploadedSize,totalSize:this.totalSize})}Promise.all(Array.from({length:this.maxConcurrency},((r,n)=>new Promise((r=>{const o=()=>{const i=this.tasks.shift();if(void 0===i)return void r(n);const a=i*this.chunksize,c=a+this.chunksize>=this.totalSize?this.totalSize:a+this.chunksize;e.f.read(a,c-a,(r=>{e.uploadChunk(t.upload_id,n,i,r,o)}),(t=>{console.log(t)}))};o()}))))).then((e=>{console.log(e),this.merge(t.upload_id)}))}success(t){console.log("success",t),this.complete(t)}fail(t){console.log(t)}progress(t){console.log("progress",t)}complete(t){console.log(t)}merge(t){const e=this.getNew();e.set("upload_id",t),e.set("digest",this.digest);const r=JSON.stringify(this.chunks),n=this;this.r.mergeRequest(this.ctx,e,r,(t=>{n.success(t)}),this.fail)}on(t,e){switch(t){case"progress":this.progress=e;break;case"retry":break;case"success":this.success=e;break;case"fail":this.fail=e;break;case"complete":this.complete=e}}run(){this.init((t=>{switch(t.status){case 0:this.upload(t);case 1:this.chunks=t.chunks,this.upload(t);break;case 2:this.success(t)}console.log(t.upload_id)}))}}var c,u="undefined"!=typeof Symbol&&Symbol,s=function(){if("function"!=typeof Symbol||"function"!=typeof Object.getOwnPropertySymbols)return!1;if("symbol"==typeof Symbol.iterator)return!0;var t={},e=Symbol("test"),r=Object(e);if("string"==typeof e)return!1;if("[object Symbol]"!==Object.prototype.toString.call(e))return!1;if("[object Symbol]"!==Object.prototype.toString.call(r))return!1;for(e in t[e]=42,t)return!1;if("function"==typeof Object.keys&&0!==Object.keys(t).length)return!1;if("function"==typeof Object.getOwnPropertyNames&&0!==Object.getOwnPropertyNames(t).length)return!1;var n=Object.getOwnPropertySymbols(t);if(1!==n.length||n[0]!==e)return!1;if(!Object.prototype.propertyIsEnumerable.call(t,e))return!1;if("function"==typeof Object.getOwnPropertyDescriptor){var o=Object.getOwnPropertyDescriptor(t,e);if(42!==o.value||!0!==o.enumerable)return!1}return!0},l="Function.prototype.bind called on incompatible ",f=Array.prototype.slice,p=Object.prototype.toString,y="[object Function]",h=function(t){var e=this;if("function"!=typeof e||p.call(e)!==y)throw new TypeError(l+e);for(var r,n=f.call(arguments,1),o=function(){if(this instanceof r){var o=e.apply(this,n.concat(f.call(arguments)));return Object(o)===o?o:this}return e.apply(t,n.concat(f.call(arguments)))},i=Math.max(0,e.length-n.length),a=[],c=0;c<i;c++)a.push("$"+c);if(r=Function("binder","return function ("+a.join(",")+"){ return binder.apply(this,arguments); }")(o),e.prototype){var u=function(){};u.prototype=e.prototype,r.prototype=new u,u.prototype=null}return r},d=Function.prototype.bind||h,g=d.call(Function.call,Object.prototype.hasOwnProperty),b=SyntaxError,m=Function,v=TypeError,S=function(t){try{return m('"use strict"; return ('+t+").constructor;")()}catch(t){}},w=Object.getOwnPropertyDescriptor;if(w)try{w({},"")}catch(t){w=null}var j=function(){throw new v},A=w?function(){try{return j}catch(t){try{return w(arguments,"callee").get}catch(t){return j}}}():j,O="function"==typeof u&&"function"==typeof Symbol&&"symbol"==typeof u("foo")&&"symbol"==typeof Symbol("bar")&&s(),P=Object.getPrototypeOf||function(t){return t.__proto__},x={},E="undefined"==typeof Uint8Array?c:P(Uint8Array),k={"%AggregateError%":"undefined"==typeof AggregateError?c:AggregateError,"%Array%":Array,"%ArrayBuffer%":"undefined"==typeof ArrayBuffer?c:ArrayBuffer,"%ArrayIteratorPrototype%":O?P([][Symbol.iterator]()):c,"%AsyncFromSyncIteratorPrototype%":c,"%AsyncFunction%":x,"%AsyncGenerator%":x,"%AsyncGeneratorFunction%":x,"%AsyncIteratorPrototype%":x,"%Atomics%":"undefined"==typeof Atomics?c:Atomics,"%BigInt%":"undefined"==typeof BigInt?c:BigInt,"%Boolean%":Boolean,"%DataView%":"undefined"==typeof DataView?c:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":Error,"%eval%":eval,"%EvalError%":EvalError,"%Float32Array%":"undefined"==typeof Float32Array?c:Float32Array,"%Float64Array%":"undefined"==typeof Float64Array?c:Float64Array,"%FinalizationRegistry%":"undefined"==typeof FinalizationRegistry?c:FinalizationRegistry,"%Function%":m,"%GeneratorFunction%":x,"%Int8Array%":"undefined"==typeof Int8Array?c:Int8Array,"%Int16Array%":"undefined"==typeof Int16Array?c:Int16Array,"%Int32Array%":"undefined"==typeof Int32Array?c:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":O?P(P([][Symbol.iterator]())):c,"%JSON%":"object"==typeof JSON?JSON:c,"%Map%":"undefined"==typeof Map?c:Map,"%MapIteratorPrototype%":"undefined"!=typeof Map&&O?P((new Map)[Symbol.iterator]()):c,"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":"undefined"==typeof Promise?c:Promise,"%Proxy%":"undefined"==typeof Proxy?c:Proxy,"%RangeError%":RangeError,"%ReferenceError%":ReferenceError,"%Reflect%":"undefined"==typeof Reflect?c:Reflect,"%RegExp%":RegExp,"%Set%":"undefined"==typeof Set?c:Set,"%SetIteratorPrototype%":"undefined"!=typeof Set&&O?P((new Set)[Symbol.iterator]()):c,"%SharedArrayBuffer%":"undefined"==typeof SharedArrayBuffer?c:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":O?P(""[Symbol.iterator]()):c,"%Symbol%":O?Symbol:c,"%SyntaxError%":b,"%ThrowTypeError%":A,"%TypedArray%":E,"%TypeError%":v,"%Uint8Array%":"undefined"==typeof Uint8Array?c:Uint8Array,"%Uint8ClampedArray%":"undefined"==typeof Uint8ClampedArray?c:Uint8ClampedArray,"%Uint16Array%":"undefined"==typeof Uint16Array?c:Uint16Array,"%Uint32Array%":"undefined"==typeof Uint32Array?c:Uint32Array,"%URIError%":URIError,"%WeakMap%":"undefined"==typeof WeakMap?c:WeakMap,"%WeakRef%":"undefined"==typeof WeakRef?c:WeakRef,"%WeakSet%":"undefined"==typeof WeakSet?c:WeakSet},_=function t(e){var r;if("%AsyncFunction%"===e)r=S("async function () {}");else if("%GeneratorFunction%"===e)r=S("function* () {}");else if("%AsyncGeneratorFunction%"===e)r=S("async function* () {}");else if("%AsyncGenerator%"===e){var n=t("%AsyncGeneratorFunction%");n&&(r=n.prototype)}else if("%AsyncIteratorPrototype%"===e){var o=t("%AsyncGenerator%");o&&(r=P(o.prototype))}return k[e]=r,r},R={"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},F=d,N=g,z=F.call(Function.call,Array.prototype.concat),U=F.call(Function.apply,Array.prototype.splice),I=F.call(Function.call,String.prototype.replace),T=F.call(Function.call,String.prototype.slice),C=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,D=/\\(\\)?/g,B=function(t){var e=T(t,0,1),r=T(t,-1);if("%"===e&&"%"!==r)throw new b("invalid intrinsic syntax, expected closing `%`");if("%"===r&&"%"!==e)throw new b("invalid intrinsic syntax, expected opening `%`");var n=[];return I(t,C,(function(t,e,r,o){n[n.length]=r?I(o,D,"$1"):e||t})),n},M=function(t,e){var r,n=t;if(N(R,n)&&(n="%"+(r=R[n])[0]+"%"),N(k,n)){var o=k[n];if(o===x&&(o=_(n)),void 0===o&&!e)throw new v("intrinsic "+t+" exists, but is not available. Please file an issue!");return{alias:r,name:n,value:o}}throw new b("intrinsic "+t+" does not exist!")},L=function(t,e){if("string"!=typeof t||0===t.length)throw new v("intrinsic name must be a non-empty string");if(arguments.length>1&&"boolean"!=typeof e)throw new v('"allowMissing" argument must be a boolean');var r=B(t),n=r.length>0?r[0]:"",o=M("%"+n+"%",e),i=o.name,a=o.value,c=!1,u=o.alias;u&&(n=u[0],U(r,z([0,1],u)));for(var s=1,l=!0;s<r.length;s+=1){var f=r[s],p=T(f,0,1),y=T(f,-1);if(('"'===p||"'"===p||"`"===p||'"'===y||"'"===y||"`"===y)&&p!==y)throw new b("property names with quotes must have matching quotes");if("constructor"!==f&&l||(c=!0),N(k,i="%"+(n+="."+f)+"%"))a=k[i];else if(null!=a){if(!(f in a)){if(!e)throw new v("base intrinsic for "+t+" exists, but the property is not available.");return}if(w&&s+1>=r.length){var h=w(a,f);a=(l=!!h)&&"get"in h&&!("originalValue"in h.get)?h.get:a[f]}else l=N(a,f),a=a[f];l&&!c&&(k[i]=a)}}return a},q={exports:{}};!function(t){var e=d,r=L,n=r("%Function.prototype.apply%"),o=r("%Function.prototype.call%"),i=r("%Reflect.apply%",!0)||e.call(o,n),a=r("%Object.getOwnPropertyDescriptor%",!0),c=r("%Object.defineProperty%",!0),u=r("%Math.max%");if(c)try{c({},"a",{value:1})}catch(t){c=null}t.exports=function(t){var r=i(e,o,arguments);if(a&&c){var n=a(r,"length");n.configurable&&c(r,"length",{value:1+u(0,t.length-(arguments.length-1))})}return r};var s=function(){return i(e,n,arguments)};c?c(t.exports,"apply",{value:s}):t.exports.apply=s}(q);var W=L,$=q.exports,H=$(W("String.prototype.indexOf")),G="undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{};function J(t){return null!=t&&(!!t._isBuffer||V(t)||function(t){return"function"==typeof t.readFloatLE&&"function"==typeof t.slice&&V(t.slice(0,0))}(t))}function V(t){return!!t.constructor&&"function"==typeof t.constructor.isBuffer&&t.constructor.isBuffer(t)}function Q(){throw new Error("setTimeout has not been defined")}function Y(){throw new Error("clearTimeout has not been defined")}void 0===G.TYPED_ARRAY_SUPPORT||G.TYPED_ARRAY_SUPPORT;var Z=Q,K=Y;function X(t){if(Z===setTimeout)return setTimeout(t,0);if((Z===Q||!Z)&&setTimeout)return Z=setTimeout,setTimeout(t,0);try{return Z(t,0)}catch(e){try{return Z.call(null,t,0)}catch(e){return Z.call(this,t,0)}}}"function"==typeof G.setTimeout&&(Z=setTimeout),"function"==typeof G.clearTimeout&&(K=clearTimeout);var tt,et=[],rt=!1,nt=-1;function ot(){rt&&tt&&(rt=!1,tt.length?et=tt.concat(et):nt=-1,et.length&&it())}function it(){if(!rt){var t=X(ot);rt=!0;for(var e=et.length;e;){for(tt=et,et=[];++nt<e;)tt&&tt[nt].run();nt=-1,e=et.length}tt=null,rt=!1,function(t){if(K===clearTimeout)return clearTimeout(t);if((K===Y||!K)&&clearTimeout)return K=clearTimeout,clearTimeout(t);try{K(t)}catch(e){try{return K.call(null,t)}catch(e){return K.call(this,t)}}}(t)}}function at(t,e){this.fun=t,this.array=e}at.prototype.run=function(){this.fun.apply(null,this.array)};function ct(){}var ut=ct,st=ct,lt=ct,ft=ct,pt=ct,yt=ct,ht=ct;var dt=G.performance||{},gt=dt.now||dt.mozNow||dt.msNow||dt.oNow||dt.webkitNow||function(){return(new Date).getTime()};var bt=new Date;var mt={nextTick:function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)e[r-1]=arguments[r];et.push(new at(t,e)),1!==et.length||rt||X(it)},title:"browser",browser:!0,env:{},argv:[],version:"",versions:{},on:ut,addListener:st,once:lt,off:ft,removeListener:pt,removeAllListeners:yt,emit:ht,binding:function(t){throw new Error("process.binding is not supported")},cwd:function(){return"/"},chdir:function(t){throw new Error("process.chdir is not supported")},umask:function(){return 0},hrtime:function(t){var e=.001*gt.call(dt),r=Math.floor(e),n=Math.floor(e%1*1e9);return t&&(r-=t[0],(n-=t[1])<0&&(r--,n+=1e9)),[r,n]},platform:"browser",release:{},config:{},uptime:function(){return(new Date-bt)/1e3}},vt="function"==typeof Object.create?function(t,e){t.super_=e,t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}})}:function(t,e){t.super_=e;var r=function(){};r.prototype=e.prototype,t.prototype=new r,t.prototype.constructor=t},St=/%[sdj%]/g;function wt(t){if(!Ct(t)){for(var e=[],r=0;r<arguments.length;r++)e.push(xt(arguments[r]));return e.join(" ")}r=1;for(var n=arguments,o=n.length,i=String(t).replace(St,(function(t){if("%%"===t)return"%";if(r>=o)return t;switch(t){case"%s":return String(n[r++]);case"%d":return Number(n[r++]);case"%j":try{return JSON.stringify(n[r++])}catch(t){return"[Circular]"}default:return t}})),a=n[r];r<o;a=n[++r])Ut(a)||!Lt(a)?i+=" "+a:i+=" "+xt(a);return i}function jt(t,e){if(Bt(G.process))return function(){return jt(t,e).apply(this,arguments)};if(!0===mt.noDeprecation)return t;var r=!1;return function(){if(!r){if(mt.throwDeprecation)throw new Error(e);mt.traceDeprecation?console.trace(e):console.error(e),r=!0}return t.apply(this,arguments)}}var At,Ot={};function Pt(t){if(Bt(At)&&(At=mt.env.NODE_DEBUG||""),t=t.toUpperCase(),!Ot[t])if(new RegExp("\\b"+t+"\\b","i").test(At)){Ot[t]=function(){var e=wt.apply(null,arguments);console.error("%s %d: %s",t,0,e)}}else Ot[t]=function(){};return Ot[t]}function xt(t,e){var r={seen:[],stylize:kt};return arguments.length>=3&&(r.depth=arguments[2]),arguments.length>=4&&(r.colors=arguments[3]),zt(e)?r.showHidden=e:e&&Kt(r,e),Bt(r.showHidden)&&(r.showHidden=!1),Bt(r.depth)&&(r.depth=2),Bt(r.colors)&&(r.colors=!1),Bt(r.customInspect)&&(r.customInspect=!0),r.colors&&(r.stylize=Et),_t(r,t,r.depth)}function Et(t,e){var r=xt.styles[e];return r?"["+xt.colors[r][0]+"m"+t+"["+xt.colors[r][1]+"m":t}function kt(t,e){return t}function _t(t,e,r){if(t.customInspect&&e&&$t(e.inspect)&&e.inspect!==xt&&(!e.constructor||e.constructor.prototype!==e)){var n=e.inspect(r,t);return Ct(n)||(n=_t(t,n,r)),n}var o=function(t,e){if(Bt(e))return t.stylize("undefined","undefined");if(Ct(e)){var r="'"+JSON.stringify(e).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return t.stylize(r,"string")}if(Tt(e))return t.stylize(""+e,"number");if(zt(e))return t.stylize(""+e,"boolean");if(Ut(e))return t.stylize("null","null")}(t,e);if(o)return o;var i=Object.keys(e),a=function(t){var e={};return t.forEach((function(t,r){e[t]=!0})),e}(i);if(t.showHidden&&(i=Object.getOwnPropertyNames(e)),Wt(e)&&(i.indexOf("message")>=0||i.indexOf("description")>=0))return Rt(e);if(0===i.length){if($t(e)){var c=e.name?": "+e.name:"";return t.stylize("[Function"+c+"]","special")}if(Mt(e))return t.stylize(RegExp.prototype.toString.call(e),"regexp");if(qt(e))return t.stylize(Date.prototype.toString.call(e),"date");if(Wt(e))return Rt(e)}var u,s="",l=!1,f=["{","}"];(Nt(e)&&(l=!0,f=["[","]"]),$t(e))&&(s=" [Function"+(e.name?": "+e.name:"")+"]");return Mt(e)&&(s=" "+RegExp.prototype.toString.call(e)),qt(e)&&(s=" "+Date.prototype.toUTCString.call(e)),Wt(e)&&(s=" "+Rt(e)),0!==i.length||l&&0!=e.length?r<0?Mt(e)?t.stylize(RegExp.prototype.toString.call(e),"regexp"):t.stylize("[Object]","special"):(t.seen.push(e),u=l?function(t,e,r,n,o){for(var i=[],a=0,c=e.length;a<c;++a)Xt(e,String(a))?i.push(Ft(t,e,r,n,String(a),!0)):i.push("");return o.forEach((function(o){o.match(/^\d+$/)||i.push(Ft(t,e,r,n,o,!0))})),i}(t,e,r,a,i):i.map((function(n){return Ft(t,e,r,a,n,l)})),t.seen.pop(),function(t,e,r){if(t.reduce((function(t,e){return e.indexOf("\n"),t+e.replace(/\u001b\[\d\d?m/g,"").length+1}),0)>60)return r[0]+(""===e?"":e+"\n ")+" "+t.join(",\n  ")+" "+r[1];return r[0]+e+" "+t.join(", ")+" "+r[1]}(u,s,f)):f[0]+s+f[1]}function Rt(t){return"["+Error.prototype.toString.call(t)+"]"}function Ft(t,e,r,n,o,i){var a,c,u;if((u=Object.getOwnPropertyDescriptor(e,o)||{value:e[o]}).get?c=u.set?t.stylize("[Getter/Setter]","special"):t.stylize("[Getter]","special"):u.set&&(c=t.stylize("[Setter]","special")),Xt(n,o)||(a="["+o+"]"),c||(t.seen.indexOf(u.value)<0?(c=Ut(r)?_t(t,u.value,null):_t(t,u.value,r-1)).indexOf("\n")>-1&&(c=i?c.split("\n").map((function(t){return"  "+t})).join("\n").substr(2):"\n"+c.split("\n").map((function(t){return"   "+t})).join("\n")):c=t.stylize("[Circular]","special")),Bt(a)){if(i&&o.match(/^\d+$/))return c;(a=JSON.stringify(""+o)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(a=a.substr(1,a.length-2),a=t.stylize(a,"name")):(a=a.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),a=t.stylize(a,"string"))}return a+": "+c}function Nt(t){return Array.isArray(t)}function zt(t){return"boolean"==typeof t}function Ut(t){return null===t}function It(t){return null==t}function Tt(t){return"number"==typeof t}function Ct(t){return"string"==typeof t}function Dt(t){return"symbol"==typeof t}function Bt(t){return void 0===t}function Mt(t){return Lt(t)&&"[object RegExp]"===Jt(t)}function Lt(t){return"object"==typeof t&&null!==t}function qt(t){return Lt(t)&&"[object Date]"===Jt(t)}function Wt(t){return Lt(t)&&("[object Error]"===Jt(t)||t instanceof Error)}function $t(t){return"function"==typeof t}function Ht(t){return null===t||"boolean"==typeof t||"number"==typeof t||"string"==typeof t||"symbol"==typeof t||void 0===t}function Gt(t){return J(t)}function Jt(t){return Object.prototype.toString.call(t)}function Vt(t){return t<10?"0"+t.toString(10):t.toString(10)}xt.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},xt.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"};var Qt=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function Yt(){var t=new Date,e=[Vt(t.getHours()),Vt(t.getMinutes()),Vt(t.getSeconds())].join(":");return[t.getDate(),Qt[t.getMonth()],e].join(" ")}function Zt(){console.log("%s - %s",Yt(),wt.apply(null,arguments))}function Kt(t,e){if(!e||!Lt(e))return t;for(var r=Object.keys(e),n=r.length;n--;)t[r[n]]=e[r[n]];return t}function Xt(t,e){return Object.prototype.hasOwnProperty.call(t,e)}var te={inherits:vt,_extend:Kt,log:Zt,isBuffer:Gt,isPrimitive:Ht,isFunction:$t,isError:Wt,isDate:qt,isObject:Lt,isRegExp:Mt,isUndefined:Bt,isSymbol:Dt,isString:Ct,isNumber:Tt,isNullOrUndefined:It,isNull:Ut,isBoolean:zt,isArray:Nt,inspect:xt,deprecate:jt,format:wt,debuglog:Pt},ee=e(Object.freeze({__proto__:null,format:wt,deprecate:jt,debuglog:Pt,inspect:xt,isArray:Nt,isBoolean:zt,isNull:Ut,isNullOrUndefined:It,isNumber:Tt,isString:Ct,isSymbol:Dt,isUndefined:Bt,isRegExp:Mt,isObject:Lt,isDate:qt,isError:Wt,isFunction:$t,isPrimitive:Ht,isBuffer:Gt,log:Zt,inherits:vt,_extend:Kt,default:te})).inspect,re="function"==typeof Map&&Map.prototype,ne=Object.getOwnPropertyDescriptor&&re?Object.getOwnPropertyDescriptor(Map.prototype,"size"):null,oe=re&&ne&&"function"==typeof ne.get?ne.get:null,ie=re&&Map.prototype.forEach,ae="function"==typeof Set&&Set.prototype,ce=Object.getOwnPropertyDescriptor&&ae?Object.getOwnPropertyDescriptor(Set.prototype,"size"):null,ue=ae&&ce&&"function"==typeof ce.get?ce.get:null,se=ae&&Set.prototype.forEach,le="function"==typeof WeakMap&&WeakMap.prototype?WeakMap.prototype.has:null,fe="function"==typeof WeakSet&&WeakSet.prototype?WeakSet.prototype.has:null,pe="function"==typeof WeakRef&&WeakRef.prototype?WeakRef.prototype.deref:null,ye=Boolean.prototype.valueOf,he=Object.prototype.toString,de=Function.prototype.toString,ge=String.prototype.match,be=String.prototype.slice,me=String.prototype.replace,ve=String.prototype.toUpperCase,Se=String.prototype.toLowerCase,we=RegExp.prototype.test,je=Array.prototype.concat,Ae=Array.prototype.join,Oe=Array.prototype.slice,Pe=Math.floor,xe="function"==typeof BigInt?BigInt.prototype.valueOf:null,Ee=Object.getOwnPropertySymbols,ke="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?Symbol.prototype.toString:null,_e="function"==typeof Symbol&&"object"==typeof Symbol.iterator,Re="function"==typeof Symbol&&Symbol.toStringTag&&(typeof Symbol.toStringTag===_e||"symbol")?Symbol.toStringTag:null,Fe=Object.prototype.propertyIsEnumerable,Ne=("function"==typeof Reflect?Reflect.getPrototypeOf:Object.getPrototypeOf)||([].__proto__===Array.prototype?function(t){return t.__proto__}:null);function ze(t,e){if(t===1/0||t===-1/0||t!=t||t&&t>-1e3&&t<1e3||we.call(/e/,e))return e;var r=/[0-9](?=(?:[0-9]{3})+(?![0-9]))/g;if("number"==typeof t){var n=t<0?-Pe(-t):Pe(t);if(n!==t){var o=String(n),i=be.call(e,o.length+1);return me.call(o,r,"$&_")+"."+me.call(me.call(i,/([0-9]{3})/g,"$&_"),/_$/,"")}}return me.call(e,r,"$&_")}var Ue=ee,Ie=Ue.custom,Te=Le(Ie)?Ie:null;function Ce(t,e,r){var n="double"===(r.quoteStyle||e)?'"':"'";return n+t+n}function De(t){return me.call(String(t),/"/g,"&quot;")}function Be(t){return!("[object Array]"!==$e(t)||Re&&"object"==typeof t&&Re in t)}function Me(t){return!("[object RegExp]"!==$e(t)||Re&&"object"==typeof t&&Re in t)}function Le(t){if(_e)return t&&"object"==typeof t&&t instanceof Symbol;if("symbol"==typeof t)return!0;if(!t||"object"!=typeof t||!ke)return!1;try{return ke.call(t),!0}catch(t){}return!1}var qe=Object.prototype.hasOwnProperty||function(t){return t in this};function We(t,e){return qe.call(t,e)}function $e(t){return he.call(t)}function He(t,e){if(t.indexOf)return t.indexOf(e);for(var r=0,n=t.length;r<n;r++)if(t[r]===e)return r;return-1}function Ge(t,e){if(t.length>e.maxStringLength){var r=t.length-e.maxStringLength,n="... "+r+" more character"+(r>1?"s":"");return Ge(be.call(t,0,e.maxStringLength),e)+n}return Ce(me.call(me.call(t,/(['\\])/g,"\\$1"),/[\x00-\x1f]/g,Je),"single",e)}function Je(t){var e=t.charCodeAt(0),r={8:"b",9:"t",10:"n",12:"f",13:"r"}[e];return r?"\\"+r:"\\x"+(e<16?"0":"")+ve.call(e.toString(16))}function Ve(t){return"Object("+t+")"}function Qe(t){return t+" { ? }"}function Ye(t,e,r,n){return t+" ("+e+") {"+(n?Ze(r,n):Ae.call(r,", "))+"}"}function Ze(t,e){if(0===t.length)return"";var r="\n"+e.prev+e.base;return r+Ae.call(t,","+r)+"\n"+e.prev}function Ke(t,e){var r=Be(t),n=[];if(r){n.length=t.length;for(var o=0;o<t.length;o++)n[o]=We(t,o)?e(t[o],t):""}var i,a="function"==typeof Ee?Ee(t):[];if(_e){i={};for(var c=0;c<a.length;c++)i["$"+a[c]]=a[c]}for(var u in t)We(t,u)&&(r&&String(Number(u))===u&&u<t.length||_e&&i["$"+u]instanceof Symbol||(we.call(/[^\w$]/,u)?n.push(e(u,t)+": "+e(t[u],t)):n.push(u+": "+e(t[u],t))));if("function"==typeof Ee)for(var s=0;s<a.length;s++)Fe.call(t,a[s])&&n.push("["+e(a[s])+"]: "+e(t[a[s]],t));return n}var Xe=L,tr=function(t,e){var r=W(t,!!e);return"function"==typeof r&&H(t,".prototype.")>-1?$(r):r},er=function t(e,r,n,o){var i=r||{};if(We(i,"quoteStyle")&&"single"!==i.quoteStyle&&"double"!==i.quoteStyle)throw new TypeError('option "quoteStyle" must be "single" or "double"');if(We(i,"maxStringLength")&&("number"==typeof i.maxStringLength?i.maxStringLength<0&&i.maxStringLength!==1/0:null!==i.maxStringLength))throw new TypeError('option "maxStringLength", if provided, must be a positive integer, Infinity, or `null`');var a=!We(i,"customInspect")||i.customInspect;if("boolean"!=typeof a&&"symbol"!==a)throw new TypeError("option \"customInspect\", if provided, must be `true`, `false`, or `'symbol'`");if(We(i,"indent")&&null!==i.indent&&"\t"!==i.indent&&!(parseInt(i.indent,10)===i.indent&&i.indent>0))throw new TypeError('option "indent" must be "\\t", an integer > 0, or `null`');if(We(i,"numericSeparator")&&"boolean"!=typeof i.numericSeparator)throw new TypeError('option "numericSeparator", if provided, must be `true` or `false`');var c=i.numericSeparator;if(void 0===e)return"undefined";if(null===e)return"null";if("boolean"==typeof e)return e?"true":"false";if("string"==typeof e)return Ge(e,i);if("number"==typeof e){if(0===e)return 1/0/e>0?"0":"-0";var u=String(e);return c?ze(e,u):u}if("bigint"==typeof e){var s=String(e)+"n";return c?ze(e,s):s}var l=void 0===i.depth?5:i.depth;if(void 0===n&&(n=0),n>=l&&l>0&&"object"==typeof e)return Be(e)?"[Array]":"[Object]";var f=function(t,e){var r;if("\t"===t.indent)r="\t";else{if(!("number"==typeof t.indent&&t.indent>0))return null;r=Ae.call(Array(t.indent+1)," ")}return{base:r,prev:Ae.call(Array(e+1),r)}}(i,n);if(void 0===o)o=[];else if(He(o,e)>=0)return"[Circular]";function p(e,r,a){if(r&&(o=Oe.call(o)).push(r),a){var c={depth:i.depth};return We(i,"quoteStyle")&&(c.quoteStyle=i.quoteStyle),t(e,c,n+1,o)}return t(e,i,n+1,o)}if("function"==typeof e&&!Me(e)){var y=function(t){if(t.name)return t.name;var e=ge.call(de.call(t),/^function\s*([\w$]+)/);if(e)return e[1];return null}(e),h=Ke(e,p);return"[Function"+(y?": "+y:" (anonymous)")+"]"+(h.length>0?" { "+Ae.call(h,", ")+" }":"")}if(Le(e)){var d=_e?me.call(String(e),/^(Symbol\(.*\))_[^)]*$/,"$1"):ke.call(e);return"object"!=typeof e||_e?d:Ve(d)}if(function(t){if(!t||"object"!=typeof t)return!1;if("undefined"!=typeof HTMLElement&&t instanceof HTMLElement)return!0;return"string"==typeof t.nodeName&&"function"==typeof t.getAttribute}(e)){for(var g="<"+Se.call(String(e.nodeName)),b=e.attributes||[],m=0;m<b.length;m++)g+=" "+b[m].name+"="+Ce(De(b[m].value),"double",i);return g+=">",e.childNodes&&e.childNodes.length&&(g+="..."),g+="</"+Se.call(String(e.nodeName))+">"}if(Be(e)){if(0===e.length)return"[]";var v=Ke(e,p);return f&&!function(t){for(var e=0;e<t.length;e++)if(He(t[e],"\n")>=0)return!1;return!0}(v)?"["+Ze(v,f)+"]":"[ "+Ae.call(v,", ")+" ]"}if(function(t){return!("[object Error]"!==$e(t)||Re&&"object"==typeof t&&Re in t)}(e)){var S=Ke(e,p);return"cause"in Error.prototype||!("cause"in e)||Fe.call(e,"cause")?0===S.length?"["+String(e)+"]":"{ ["+String(e)+"] "+Ae.call(S,", ")+" }":"{ ["+String(e)+"] "+Ae.call(je.call("[cause]: "+p(e.cause),S),", ")+" }"}if("object"==typeof e&&a){if(Te&&"function"==typeof e[Te]&&Ue)return Ue(e,{depth:l-n});if("symbol"!==a&&"function"==typeof e.inspect)return e.inspect()}if(function(t){if(!oe||!t||"object"!=typeof t)return!1;try{oe.call(t);try{ue.call(t)}catch(t){return!0}return t instanceof Map}catch(t){}return!1}(e)){var w=[];return ie.call(e,(function(t,r){w.push(p(r,e,!0)+" => "+p(t,e))})),Ye("Map",oe.call(e),w,f)}if(function(t){if(!ue||!t||"object"!=typeof t)return!1;try{ue.call(t);try{oe.call(t)}catch(t){return!0}return t instanceof Set}catch(t){}return!1}(e)){var j=[];return se.call(e,(function(t){j.push(p(t,e))})),Ye("Set",ue.call(e),j,f)}if(function(t){if(!le||!t||"object"!=typeof t)return!1;try{le.call(t,le);try{fe.call(t,fe)}catch(t){return!0}return t instanceof WeakMap}catch(t){}return!1}(e))return Qe("WeakMap");if(function(t){if(!fe||!t||"object"!=typeof t)return!1;try{fe.call(t,fe);try{le.call(t,le)}catch(t){return!0}return t instanceof WeakSet}catch(t){}return!1}(e))return Qe("WeakSet");if(function(t){if(!pe||!t||"object"!=typeof t)return!1;try{return pe.call(t),!0}catch(t){}return!1}(e))return Qe("WeakRef");if(function(t){return!("[object Number]"!==$e(t)||Re&&"object"==typeof t&&Re in t)}(e))return Ve(p(Number(e)));if(function(t){if(!t||"object"!=typeof t||!xe)return!1;try{return xe.call(t),!0}catch(t){}return!1}(e))return Ve(p(xe.call(e)));if(function(t){return!("[object Boolean]"!==$e(t)||Re&&"object"==typeof t&&Re in t)}(e))return Ve(ye.call(e));if(function(t){return!("[object String]"!==$e(t)||Re&&"object"==typeof t&&Re in t)}(e))return Ve(p(String(e)));if(!function(t){return!("[object Date]"!==$e(t)||Re&&"object"==typeof t&&Re in t)}(e)&&!Me(e)){var A=Ke(e,p),O=Ne?Ne(e)===Object.prototype:e instanceof Object||e.constructor===Object,P=e instanceof Object?"":"null prototype",x=!O&&Re&&Object(e)===e&&Re in e?be.call($e(e),8,-1):P?"Object":"",E=(O||"function"!=typeof e.constructor?"":e.constructor.name?e.constructor.name+" ":"")+(x||P?"["+Ae.call(je.call([],x||[],P||[]),": ")+"] ":"");return 0===A.length?E+"{}":f?E+"{"+Ze(A,f)+"}":E+"{ "+Ae.call(A,", ")+" }"}return String(e)},rr=Xe("%TypeError%"),nr=Xe("%WeakMap%",!0),or=Xe("%Map%",!0),ir=tr("WeakMap.prototype.get",!0),ar=tr("WeakMap.prototype.set",!0),cr=tr("WeakMap.prototype.has",!0),ur=tr("Map.prototype.get",!0),sr=tr("Map.prototype.set",!0),lr=tr("Map.prototype.has",!0),fr=function(t,e){for(var r,n=t;null!==(r=n.next);n=r)if(r.key===e)return n.next=r.next,r.next=t.next,t.next=r,r},pr=String.prototype.replace,yr=/%20/g,hr="RFC3986",dr={default:hr,formatters:{RFC1738:function(t){return pr.call(t,yr,"+")},RFC3986:function(t){return String(t)}},RFC1738:"RFC1738",RFC3986:hr},gr=dr,br=Object.prototype.hasOwnProperty,mr=Array.isArray,vr=function(){for(var t=[],e=0;e<256;++e)t.push("%"+((e<16?"0":"")+e.toString(16)).toUpperCase());return t}(),Sr=function(t,e){for(var r=e&&e.plainObjects?Object.create(null):{},n=0;n<t.length;++n)void 0!==t[n]&&(r[n]=t[n]);return r},wr={arrayToObject:Sr,assign:function(t,e){return Object.keys(e).reduce((function(t,r){return t[r]=e[r],t}),t)},combine:function(t,e){return[].concat(t,e)},compact:function(t){for(var e=[{obj:{o:t},prop:"o"}],r=[],n=0;n<e.length;++n)for(var o=e[n],i=o.obj[o.prop],a=Object.keys(i),c=0;c<a.length;++c){var u=a[c],s=i[u];"object"==typeof s&&null!==s&&-1===r.indexOf(s)&&(e.push({obj:i,prop:u}),r.push(s))}return function(t){for(;t.length>1;){var e=t.pop(),r=e.obj[e.prop];if(mr(r)){for(var n=[],o=0;o<r.length;++o)void 0!==r[o]&&n.push(r[o]);e.obj[e.prop]=n}}}(e),t},decode:function(t,e,r){var n=t.replace(/\+/g," ");if("iso-8859-1"===r)return n.replace(/%[0-9a-f]{2}/gi,unescape);try{return decodeURIComponent(n)}catch(t){return n}},encode:function(t,e,r,n,o){if(0===t.length)return t;var i=t;if("symbol"==typeof t?i=Symbol.prototype.toString.call(t):"string"!=typeof t&&(i=String(t)),"iso-8859-1"===r)return escape(i).replace(/%u[0-9a-f]{4}/gi,(function(t){return"%26%23"+parseInt(t.slice(2),16)+"%3B"}));for(var a="",c=0;c<i.length;++c){var u=i.charCodeAt(c);45===u||46===u||95===u||126===u||u>=48&&u<=57||u>=65&&u<=90||u>=97&&u<=122||o===gr.RFC1738&&(40===u||41===u)?a+=i.charAt(c):u<128?a+=vr[u]:u<2048?a+=vr[192|u>>6]+vr[128|63&u]:u<55296||u>=57344?a+=vr[224|u>>12]+vr[128|u>>6&63]+vr[128|63&u]:(c+=1,u=65536+((1023&u)<<10|1023&i.charCodeAt(c)),a+=vr[240|u>>18]+vr[128|u>>12&63]+vr[128|u>>6&63]+vr[128|63&u])}return a},isBuffer:function(t){return!(!t||"object"!=typeof t)&&!!(t.constructor&&t.constructor.isBuffer&&t.constructor.isBuffer(t))},isRegExp:function(t){return"[object RegExp]"===Object.prototype.toString.call(t)},maybeMap:function(t,e){if(mr(t)){for(var r=[],n=0;n<t.length;n+=1)r.push(e(t[n]));return r}return e(t)},merge:function t(e,r,n){if(!r)return e;if("object"!=typeof r){if(mr(e))e.push(r);else{if(!e||"object"!=typeof e)return[e,r];(n&&(n.plainObjects||n.allowPrototypes)||!br.call(Object.prototype,r))&&(e[r]=!0)}return e}if(!e||"object"!=typeof e)return[e].concat(r);var o=e;return mr(e)&&!mr(r)&&(o=Sr(e,n)),mr(e)&&mr(r)?(r.forEach((function(r,o){if(br.call(e,o)){var i=e[o];i&&"object"==typeof i&&r&&"object"==typeof r?e[o]=t(i,r,n):e.push(r)}else e[o]=r})),e):Object.keys(r).reduce((function(e,o){var i=r[o];return br.call(e,o)?e[o]=t(e[o],i,n):e[o]=i,e}),o)}},jr=function(){var t,e,r,n={assert:function(t){if(!n.has(t))throw new rr("Side channel does not contain "+er(t))},get:function(n){if(nr&&n&&("object"==typeof n||"function"==typeof n)){if(t)return ir(t,n)}else if(or){if(e)return ur(e,n)}else if(r)return function(t,e){var r=fr(t,e);return r&&r.value}(r,n)},has:function(n){if(nr&&n&&("object"==typeof n||"function"==typeof n)){if(t)return cr(t,n)}else if(or){if(e)return lr(e,n)}else if(r)return function(t,e){return!!fr(t,e)}(r,n);return!1},set:function(n,o){nr&&n&&("object"==typeof n||"function"==typeof n)?(t||(t=new nr),ar(t,n,o)):or?(e||(e=new or),sr(e,n,o)):(r||(r={key:{},next:null}),function(t,e,r){var n=fr(t,e);n?n.value=r:t.next={key:e,next:t.next,value:r}}(r,n,o))}};return n},Ar=wr,Or=dr,Pr=Object.prototype.hasOwnProperty,xr={brackets:function(t){return t+"[]"},comma:"comma",indices:function(t,e){return t+"["+e+"]"},repeat:function(t){return t}},Er=Array.isArray,kr=String.prototype.split,_r=Array.prototype.push,Rr=function(t,e){_r.apply(t,Er(e)?e:[e])},Fr=Date.prototype.toISOString,Nr=Or.default,zr={addQueryPrefix:!1,allowDots:!1,charset:"utf-8",charsetSentinel:!1,delimiter:"&",encode:!0,encoder:Ar.encode,encodeValuesOnly:!1,format:Nr,formatter:Or.formatters[Nr],indices:!1,serializeDate:function(t){return Fr.call(t)},skipNulls:!1,strictNullHandling:!1},Ur={},Ir=function t(e,r,n,o,i,a,c,u,s,l,f,p,y,h,d){for(var g,b=e,m=d,v=0,S=!1;void 0!==(m=m.get(Ur))&&!S;){var w=m.get(e);if(v+=1,void 0!==w){if(w===v)throw new RangeError("Cyclic object value");S=!0}void 0===m.get(Ur)&&(v=0)}if("function"==typeof c?b=c(r,b):b instanceof Date?b=l(b):"comma"===n&&Er(b)&&(b=Ar.maybeMap(b,(function(t){return t instanceof Date?l(t):t}))),null===b){if(o)return a&&!y?a(r,zr.encoder,h,"key",f):r;b=""}if("string"==typeof(g=b)||"number"==typeof g||"boolean"==typeof g||"symbol"==typeof g||"bigint"==typeof g||Ar.isBuffer(b)){if(a){var j=y?r:a(r,zr.encoder,h,"key",f);if("comma"===n&&y){for(var A=kr.call(String(b),","),O="",P=0;P<A.length;++P)O+=(0===P?"":",")+p(a(A[P],zr.encoder,h,"value",f));return[p(j)+"="+O]}return[p(j)+"="+p(a(b,zr.encoder,h,"value",f))]}return[p(r)+"="+p(String(b))]}var x,E=[];if(void 0===b)return E;if("comma"===n&&Er(b))x=[{value:b.length>0?b.join(",")||null:void 0}];else if(Er(c))x=c;else{var k=Object.keys(b);x=u?k.sort(u):k}for(var _=0;_<x.length;++_){var R=x[_],F="object"==typeof R&&void 0!==R.value?R.value:b[R];if(!i||null!==F){var N=Er(b)?"function"==typeof n?n(r,R):r:r+(s?"."+R:"["+R+"]");d.set(e,v);var z=jr();z.set(Ur,d),Rr(E,t(F,N,n,o,i,a,c,u,s,l,f,p,y,h,z))}}return E},Tr=wr,Cr=Object.prototype.hasOwnProperty,Dr=Array.isArray,Br={allowDots:!1,allowPrototypes:!1,allowSparse:!1,arrayLimit:20,charset:"utf-8",charsetSentinel:!1,comma:!1,decoder:Tr.decode,delimiter:"&",depth:5,ignoreQueryPrefix:!1,interpretNumericEntities:!1,parameterLimit:1e3,parseArrays:!0,plainObjects:!1,strictNullHandling:!1},Mr=function(t){return t.replace(/&#(\d+);/g,(function(t,e){return String.fromCharCode(parseInt(e,10))}))},Lr=function(t,e){return t&&"string"==typeof t&&e.comma&&t.indexOf(",")>-1?t.split(","):t},qr=function(t,e,r,n){if(t){var o=r.allowDots?t.replace(/\.([^.[]+)/g,"[$1]"):t,i=/(\[[^[\]]*])/g,a=r.depth>0&&/(\[[^[\]]*])/.exec(o),c=a?o.slice(0,a.index):o,u=[];if(c){if(!r.plainObjects&&Cr.call(Object.prototype,c)&&!r.allowPrototypes)return;u.push(c)}for(var s=0;r.depth>0&&null!==(a=i.exec(o))&&s<r.depth;){if(s+=1,!r.plainObjects&&Cr.call(Object.prototype,a[1].slice(1,-1))&&!r.allowPrototypes)return;u.push(a[1])}return a&&u.push("["+o.slice(a.index)+"]"),function(t,e,r,n){for(var o=n?e:Lr(e,r),i=t.length-1;i>=0;--i){var a,c=t[i];if("[]"===c&&r.parseArrays)a=[].concat(o);else{a=r.plainObjects?Object.create(null):{};var u="["===c.charAt(0)&&"]"===c.charAt(c.length-1)?c.slice(1,-1):c,s=parseInt(u,10);r.parseArrays||""!==u?!isNaN(s)&&c!==u&&String(s)===u&&s>=0&&r.parseArrays&&s<=r.arrayLimit?(a=[])[s]=o:"__proto__"!==u&&(a[u]=o):a={0:o}}o=a}return o}(u,e,r,n)}},Wr=function(t,e){var r,n=t,o=function(t){if(!t)return zr;if(null!==t.encoder&&void 0!==t.encoder&&"function"!=typeof t.encoder)throw new TypeError("Encoder has to be a function.");var e=t.charset||zr.charset;if(void 0!==t.charset&&"utf-8"!==t.charset&&"iso-8859-1"!==t.charset)throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var r=Or.default;if(void 0!==t.format){if(!Pr.call(Or.formatters,t.format))throw new TypeError("Unknown format option provided.");r=t.format}var n=Or.formatters[r],o=zr.filter;return("function"==typeof t.filter||Er(t.filter))&&(o=t.filter),{addQueryPrefix:"boolean"==typeof t.addQueryPrefix?t.addQueryPrefix:zr.addQueryPrefix,allowDots:void 0===t.allowDots?zr.allowDots:!!t.allowDots,charset:e,charsetSentinel:"boolean"==typeof t.charsetSentinel?t.charsetSentinel:zr.charsetSentinel,delimiter:void 0===t.delimiter?zr.delimiter:t.delimiter,encode:"boolean"==typeof t.encode?t.encode:zr.encode,encoder:"function"==typeof t.encoder?t.encoder:zr.encoder,encodeValuesOnly:"boolean"==typeof t.encodeValuesOnly?t.encodeValuesOnly:zr.encodeValuesOnly,filter:o,format:r,formatter:n,serializeDate:"function"==typeof t.serializeDate?t.serializeDate:zr.serializeDate,skipNulls:"boolean"==typeof t.skipNulls?t.skipNulls:zr.skipNulls,sort:"function"==typeof t.sort?t.sort:null,strictNullHandling:"boolean"==typeof t.strictNullHandling?t.strictNullHandling:zr.strictNullHandling}}(e);"function"==typeof o.filter?n=(0,o.filter)("",n):Er(o.filter)&&(r=o.filter);var i,a=[];if("object"!=typeof n||null===n)return"";i=e&&e.arrayFormat in xr?e.arrayFormat:e&&"indices"in e?e.indices?"indices":"repeat":"indices";var c=xr[i];r||(r=Object.keys(n)),o.sort&&r.sort(o.sort);for(var u=jr(),s=0;s<r.length;++s){var l=r[s];o.skipNulls&&null===n[l]||Rr(a,Ir(n[l],l,c,o.strictNullHandling,o.skipNulls,o.encode?o.encoder:null,o.filter,o.sort,o.allowDots,o.serializeDate,o.format,o.formatter,o.encodeValuesOnly,o.charset,u))}var f=a.join(o.delimiter),p=!0===o.addQueryPrefix?"?":"";return o.charsetSentinel&&("iso-8859-1"===o.charset?p+="utf8=%26%2310003%3B&":p+="utf8=%E2%9C%93&"),f.length>0?p+f:""},$r={formats:dr,parse:function(t,e){var r=function(t){if(!t)return Br;if(null!==t.decoder&&void 0!==t.decoder&&"function"!=typeof t.decoder)throw new TypeError("Decoder has to be a function.");if(void 0!==t.charset&&"utf-8"!==t.charset&&"iso-8859-1"!==t.charset)throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var e=void 0===t.charset?Br.charset:t.charset;return{allowDots:void 0===t.allowDots?Br.allowDots:!!t.allowDots,allowPrototypes:"boolean"==typeof t.allowPrototypes?t.allowPrototypes:Br.allowPrototypes,allowSparse:"boolean"==typeof t.allowSparse?t.allowSparse:Br.allowSparse,arrayLimit:"number"==typeof t.arrayLimit?t.arrayLimit:Br.arrayLimit,charset:e,charsetSentinel:"boolean"==typeof t.charsetSentinel?t.charsetSentinel:Br.charsetSentinel,comma:"boolean"==typeof t.comma?t.comma:Br.comma,decoder:"function"==typeof t.decoder?t.decoder:Br.decoder,delimiter:"string"==typeof t.delimiter||Tr.isRegExp(t.delimiter)?t.delimiter:Br.delimiter,depth:"number"==typeof t.depth||!1===t.depth?+t.depth:Br.depth,ignoreQueryPrefix:!0===t.ignoreQueryPrefix,interpretNumericEntities:"boolean"==typeof t.interpretNumericEntities?t.interpretNumericEntities:Br.interpretNumericEntities,parameterLimit:"number"==typeof t.parameterLimit?t.parameterLimit:Br.parameterLimit,parseArrays:!1!==t.parseArrays,plainObjects:"boolean"==typeof t.plainObjects?t.plainObjects:Br.plainObjects,strictNullHandling:"boolean"==typeof t.strictNullHandling?t.strictNullHandling:Br.strictNullHandling}}(e);if(""===t||null==t)return r.plainObjects?Object.create(null):{};for(var n="string"==typeof t?function(t,e){var r,n={},o=e.ignoreQueryPrefix?t.replace(/^\?/,""):t,i=e.parameterLimit===1/0?void 0:e.parameterLimit,a=o.split(e.delimiter,i),c=-1,u=e.charset;if(e.charsetSentinel)for(r=0;r<a.length;++r)0===a[r].indexOf("utf8=")&&("utf8=%E2%9C%93"===a[r]?u="utf-8":"utf8=%26%2310003%3B"===a[r]&&(u="iso-8859-1"),c=r,r=a.length);for(r=0;r<a.length;++r)if(r!==c){var s,l,f=a[r],p=f.indexOf("]="),y=-1===p?f.indexOf("="):p+1;-1===y?(s=e.decoder(f,Br.decoder,u,"key"),l=e.strictNullHandling?null:""):(s=e.decoder(f.slice(0,y),Br.decoder,u,"key"),l=Tr.maybeMap(Lr(f.slice(y+1),e),(function(t){return e.decoder(t,Br.decoder,u,"value")}))),l&&e.interpretNumericEntities&&"iso-8859-1"===u&&(l=Mr(l)),f.indexOf("[]=")>-1&&(l=Dr(l)?[l]:l),Cr.call(n,s)?n[s]=Tr.combine(n[s],l):n[s]=l}return n}(t,r):t,o=r.plainObjects?Object.create(null):{},i=Object.keys(n),a=0;a<i.length;++a){var c=i[a],u=qr(c,n[c],r,"string"==typeof t);o=Tr.merge(o,u,r)}return!0===r.allowSparse?o:Tr.compact(o)},stringify:Wr};const Hr={method:"get",params:{},data:"",timeout:1e3,credentials:"same-origin",headers:{},mod:"same-origin",prefix:"",suffix:"",requestType:"json",responseType:"json",hooks:[t=>{if(t.status>=200&&t.status<300)return t;throw new Error(`request error: ${t.statusText}`)}]};class Gr{constructor(t){this.opts=t||{}}_request(e,r,n){var o,i,a;return t(this,void 0,void 0,(function*(){const t=Object.assign(Object.assign(Object.assign({},this.opts),n),{method:e}),c=null!==(o=t.prefix)&&void 0!==o?o:"",u=null!==(i=t.suffix)&&void 0!==i?i:"";if(r=`${c}${r}${u}`,t.params){const e=Object.prototype.toString.call(t.params);"[object URLSearchParams]"===e?t.params=t.params.toString():"[object Object]"!==e&&"[object Array]"!==e||(t.params=$r.stringify(t.params,{arrayFormat:"brackets"}));const n=-1!==r.indexOf("?")?"&":"?";r=`${r}${n}${t.params}`}const s=new Request(r);let l=fetch(s,(t=>{var e;const r={},n=Object.assign(Object.assign({},Hr),t),{requestType:o="json",data:i}=n;let a;if(i){const t=Object.prototype.toString.call(i);"[object Object]"===t||"[object Array]"===t?"json"===o?(n.headers=Object.assign({Accept:"application/json","Content-Type":"application/json;charset=UTF-8"},n.headers),a=JSON.stringify(i)):"form"===o&&(n.headers=Object.assign({Accept:"application/json","Content-Type":"application/x-www-form-urlencoded;charset=UTF-8"},n.headers),a=$r.stringify(i,{arrayFormat:"repeat",strictNullHandling:!0})):(n.headers=Object.assign({Accept:"application/json"},n.headers),a=i)}return r.method=null===(e=n.method)||void 0===e?void 0:e.toUpperCase(),r.headers=n.headers,r.body=a,r.credentials=n.credentials,r.mode=n.mod,r})(t));t.hooks=null!==(a=t.hooks)&&void 0!==a?a:[];for(const e of t.hooks)l=l.then(e);return l}))}get(e,r){return t(this,void 0,void 0,(function*(){return this._request("get",e,r)}))}post(e,r){return t(this,void 0,void 0,(function*(){return this._request("post",e,r)}))}delete(e,r){return t(this,void 0,void 0,(function*(){return this._request("delete",e,r)}))}put(e,r){return t(this,void 0,void 0,(function*(){return this._request("put",e,r)}))}}const Jr=(t=Hr)=>new Gr(t);Jr({});class Vr{constructor(t){this.file=t}read(t,e,r,n){const o=Blob.prototype.slice.call(this.file,t,t+e),i=new FileReader;i.onload=t=>{t&&t.target&&t.target.readyState===FileReader.DONE&&r(t.target.result)},i.onerror=t=>{console.log(t),n(Error("fileReader error"))},i.onerror=t=>{console.log(t)},i.readAsArrayBuffer(o)}digest(t,e){const r=File.prototype.slice,n=2097152,o=Math.ceil(this.file.size/n),a=new i.ArrayBuffer,c=new FileReader;let u=0;c.onload=function(r){if(console.log("read chunk nr",u+1,"of",o),r&&r.target&&r.target.readyState===FileReader.DONE)if(a.append(r.target.result),u++,u<o)s();else{console.log("finished loading");const e=a.end();t(e)}else e(Error("hash error"))},c.onerror=function(){console.warn("oops, something went wrong.")};const s=()=>{const t=u*n,e=t+n>=this.size()?this.size():t+n;c.readAsArrayBuffer(r.call(this.file,t,e))};s()}size(){return this.file.size}}class Qr{request(e,r,n){return t(this,void 0,void 0,(function*(){return Jr(n)._request(e,r,n).then((t=>t.json()))}))}initRequest(t,e,r,n,o){const{touchUrl:i,headers:a,withCredentials:c}=t,u={credentials:c,params:e,headers:a,data:r};this.request("post",i,u).then((t=>{n(t.data)})).catch((t=>{console.log(t),o(t)}))}chunkRequest(t,e,r,n,o){const{uploadUrl:i,headers:a,withCredentials:c}=t,u={credentials:c,params:e,headers:a,data:r};this.request("post",i,u).then((t=>{n(t.data)})).catch((t=>{console.log(t),o(t)}))}mergeRequest(t,e,r,n,o){const{mergeUrl:i,headers:a,withCredentials:c}=t,u={credentials:c,params:e,headers:a,data:r};this.request("post",i,u).then((t=>{n(t.data)})).catch((t=>{console.log(t),o(t)}))}}return(t,e)=>new a(t,new Vr(e),new Qr,URLSearchParams)}));
